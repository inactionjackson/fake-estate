(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(70)},43:function(e,t,n){},44:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(32),i=n.n(r),l=(n(43),n(12)),o=n(10),u=n(1),s=(n(44),n(2)),m=n(9),f=n.n(m);function d(e){var t=e.suggestions,n=e.clickHandler;return c.a.createElement("ul",{className:"autoCompleteBox"},t.map(function(e,t){return c.a.createElement("li",{className:"suggestion",key:t,index:t,onClick:function(){return n(t)}},e.city," , ",e.state)}))}function b(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null),l=Object(s.a)(i,2),o=l[0],m=l[1],b=Object(a.useState)(""),h=Object(s.a)(b,2),p=h[0],g=h[1],v=Object(a.useState)(null),j=Object(s.a)(v,2),O=j[0],E=j[1],S=Object(u.d)(function(e){return e.setToMapSearch}),y=Object(u.e)(function(e){return e.selectedCity}),k=Object(u.d)(function(e){return e.setSelectedCity}),C=function(e){return e.city+" , "+e.state};Object(a.useEffect)(function(){""!==y.city&&g(C(y));var e=f.a.CancelToken.source();return f.a.get("sorted_usaCities.json",{cancelToken:e.token}).then(function(e){return E(e.data)}).catch(function(e){return console.log(e)}),function(){e.cancel("CitySearchBox component unmounted")}},[]);var w=function(e){var t=(e=e.toUpperCase()).length,n=e[0];return O[n].filter(function(n){return n.city.substring(0,t).toUpperCase()===e})||[]},M=c.a.createRef(),N=function(){M.current.select()},F=function(e){if("Enter"===e.key&&p){var t=o;if(!t){var n=w(p);n.length>0?t=n[0]:alert("no matching cities found")}t&&(k(t),S(!0))}};return c.a.createElement(c.a.Fragment,null,n.length>0&&c.a.createElement("div",{className:"clickCapture",onClick:function(){r([])}}),c.a.createElement("div",{className:"citySearchBox"},c.a.createElement("div",{style:{display:"inline-block",position:"relative"}},c.a.createElement("input",{type:"text",size:"40",name:"cityTerm",placeholder:"listings in:",onChange:function(e){var t=e.target.value;o&&C(o)!==t&&m(null),g(t),O&&t.match(/^[a-zA-Z ]+$/)?r(w(t)):r([])},onKeyPress:F,onFocus:N,onClick:N,value:p,ref:M}),n.length>0&&c.a.createElement(d,{clickHandler:function(e){var t=n[e];m(t),g(C(t)),r([]),M.current.focus()},suggestions:n})),c.a.createElement("button",{name:"citySearchSubmit",onClick:function(){return F({key:"Enter"})}},"Search")))}var h={color:"black"};function p(){var e=Object(u.e)(function(e){return e.selectedCity}),t=Object(a.useState)(!1),n=Object(s.a)(t,2),r=n[0],i=n[1];return Object(a.useEffect)(function(){""!==e.city?i(!0):i(!1)},[e]),c.a.createElement("div",{className:"header"},c.a.createElement(l.b,{to:"/",style:h},c.a.createElement("p",null,"Fake-estate")),r&&c.a.createElement(b,null))}function g(){var e=Object(u.e)(function(e){return e.toMapSearch}),t=Object(u.d)(function(e){return e.setToMapSearch}),n=Object(u.d)(function(e){return e.resetSelectedCity}),r=Object(a.useState)(!1),i=Object(s.a)(r,2),l=i[0],m=i[1];return Object(a.useEffect)(function(){n()},[]),Object(a.useEffect)(function(){e&&(t(!1),m(!0))},[e]),l?c.a.createElement(o.a,{to:"/mapSearch"}):c.a.createElement("div",{className:"page homePage"},c.a.createElement("div",{className:"homePageContent"},c.a.createElement("h1",null," Find Local Homes"),c.a.createElement(b,null)))}var v=n(15),j=n(37),O=function e(){Object(j.a)(this,e)};function E(e){var t=e.listing,n=(e.id,e.focusHandler),r=Object(u.d)(function(e){return e.setSelectedHouseId}),i=Object(u.e)(function(e){return e.selectedHouseId}),l=Object(a.useState)(!1),o=Object(s.a)(l,2),m=o[0],f=o[1],d=c.a.createRef(),b=Object(u.d)(function(e){return e.setListingBeingViewed});return Object(a.useEffect)(function(){t.id===i?(f(!0),n(d.current.offsetTop)):f(!1)},[i]),c.a.createElement("div",{className:(m?"selectedThumb ":"")+"resultThumbnail",onMouseOver:function(){r(t.id)},onClick:function(){b(t.id)},ref:d},c.a.createElement("img",{src:t.thumb}),c.a.createElement("div",null,c.a.createElement("span",{className:"thumb_price"},O.price(t.price)),c.a.createElement("span",{className:"thumb_bedbath"},O.bed(t.bdr)+" / "+O.bath(t.bth))))}function S(){var e=Object(u.e)(function(e){return e.filteredResults}),t=Object(a.useState)(!0),n=Object(s.a)(t,2),r=n[0],i=n[1],l=c.a.createRef(),o=function(e){var t=l.current.scrollTop;(e>t+l.current.offsetHeight||e<t&&r)&&(l.current.scrollTop=e-5,i(!1),setTimeout(function(){i(!0)},300))};return c.a.createElement("div",{className:"gridContainer",ref:l},c.a.createElement("div",{className:"resultGrid"},e.length>0&&e.map(function(e,t){return c.a.createElement(E,{key:t,listing:e,id:t,focusHandler:o})})))}O.number=function(e){if(parseInt(e)>0)for(var t=(e=e.toString()).length-3;t>0;)e=e.substring(0,t)+","+e.substring(t),t-=3;return e},O.price=function(e){return parseInt(e)>0&&(e="$"+(e=O.number(e))),e},O.bed=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return parseInt(e)>=0&&(t&&(e+="+"),e+=" Beds"),e},O.bath=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return parseInt(e)>0&&(t&&(e+="+"),e+=" Baths"),e},O.sqft=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return parseInt(e)>0&&(e=O.number(e),t&&(e+="+"),e+=" sq.ft."),e};var y=n(14),k=n.n(y);function C(){var e=Object(u.e)(function(e){return e.selectedCity}),t=Object(u.e)(function(e){return e.fullResults}),n=Object(u.e)(function(e){return e.filteredResults}),r=Object(u.d)(function(e){return e.setFullResults}),i=Object(u.e)(function(e){return e.selectedHouseId}),l=Object(u.d)(function(e){return e.setSelectedHouseId}),m=Object(u.d)(function(e){return e.setListingBeingViewed}),d=Object(a.useState)(!1),b=Object(s.a)(d,2),h=b[0],p=b[1],g=Object(a.useState)(null),j=Object(s.a)(g,2),E=j[0],S=j[1],y=Object(a.useState)(!1),C=Object(s.a)(y,2),w=C[0],M=C[1],N=Object(a.useState)([]),F=Object(s.a)(N,2),B=F[0],x=F[1];return Object(a.useEffect)(function(){var t=f.a.CancelToken.source(),n="https://api.opencagedata.com/geocode/v1/json?key=2573852ff477475fa7c0da745eeea496&q="+e.city+"+"+e.state;return f.a.get(n).catch(function(e){console.log(e)}).then(function(e){try{document.getElementById("mapDisplay").innerHTML="<div id='map' style='width: 100%; height: 100%;'></div>";var t=k.a.map("map").setView([e.data.results[0].geometry.lat,e.data.results[0].geometry.lng],13);k.a.tileLayer("https://tiles.wmflabs.org/hikebike/{z}/{x}/{y}.png",{maxZoom:19,attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(t);S(t),M(!0)}catch(n){console.log("could not retrieve map coordinates:"+n),p(!0)}}),function(){t.cancel("MapDisplay component unmounted")}},[e]),Object(a.useEffect)(function(){if(t.length>0&&!t[0].hasOwnProperty("coords")&&E){var e=t.map(function(e){var t=E.containerPointToLayerPoint(function(){if(E){var e=Math.floor(Math.random()*Math.floor(E.getSize().x)),t=Math.floor(Math.random()*Math.floor(E.getSize().y));return k.a.point(e,t)}}());return t=E.layerPointToLatLng(t),Object(v.a)({},e,{coords:t})});r(e)}M(!1)},[w]),Object(a.useEffect)(function(){n.length>0&&E?(B.forEach(function(e){e&&e.marker.removeFrom(E)}),x([]),x(n.map(function(e,t){if(e.coords){var n=k.a.marker(e.coords);return n.addTo(E),n.bindPopup(O.price(e.price)),n.on("mouseover",function(){var t;t=e.id,l(t)}),n.on("click",function(){m(e.id)}),{marker:n,id:e.id}}}))):0===n.length&&(B.forEach(function(e){e.marker.removeFrom(E)}),x([]))},[n]),Object(a.useEffect)(function(){B.forEach(function(e){e.id!==i||e.marker.openPopup()})},[i]),h?c.a.createElement(o.a,{to:"/"}):c.a.createElement("div",{id:"mapDisplay"},c.a.createElement("div",null,"loading..."))}function w(e){for(var t=e.min,n=e.max,a=e.stepSize,r=e.onSelect,i=e.valueFormatter,l=[],o=t;o<=n;)l.push(o),o+=a;return l[l.length-1]!==n&&l.push(n),c.a.createElement("ul",{className:"autoCompleteBox"},l.map(function(e,t){return c.a.createElement("li",{className:"suggestion",key:t,onClick:function(){return r(e)}},i(e,!0))}))}function M(e){var t=e.placeholder,n=e.min,r=e.max,i=e.stepSize,l=e.g_onSelected,o=e.valueFormatter,m=e.id,f=Object(a.useState)(t),d=Object(s.a)(f,2),b=d[0],h=d[1],p=Object(a.useState)(!1),g=Object(s.a)(p,2),v=g[0],j=g[1],O=Object(u.e)(function(e){return e.activeDropdown}),E=Object(u.d)(function(e){return e.setActiveDropdown}),S=function(){v?O===m&&E(null):E(m)};return Object(a.useEffect)(function(){j(O===m)},[O]),c.a.createElement("div",{className:"searchInputContainer"},c.a.createElement("div",{className:"dropdownContainer"},c.a.createElement("button",{onClick:S},c.a.createElement("p",null,o(b,!0)),c.a.createElement("span",null," \u2228 ")),v&&c.a.createElement("div",{className:"clickCapture",onClick:S}),v&&c.a.createElement(w,{min:n,max:r,stepSize:i,onSelect:function(e){h(e),l(e),S()},valueFormatter:o})))}function N(){var e=Object(u.d)(function(e){return e.setMinPrice}),t=Object(u.d)(function(e){return e.setMaxPrice}),n=Object(u.d)(function(e){return e.setMinBdr}),a=Object(u.d)(function(e){return e.setMinBath}),r=Object(u.d)(function(e){return e.setMinSqft}),i=Object(u.d)(function(e){return e.togglebHasGarage}),l=Object(u.e)(function(e){return e.filteredResults});return c.a.createElement("div",{className:"searchHeader"},c.a.createElement(M,{placeholder:"Min Price",min:2e4,max:1e6,stepSize:5e4,g_onSelected:e,valueFormatter:O.price})," <=> ",c.a.createElement(M,{placeholder:"Max Price",min:2e4,max:1e6,stepSize:5e4,g_onSelected:t,valueFormatter:O.price,id:0}),c.a.createElement(M,{placeholder:"Beds",min:0,max:7,stepSize:1,g_onSelected:n,valueFormatter:O.bed,id:1}),c.a.createElement(M,{placeholder:"Baths",min:0,max:7,stepSize:1,g_onSelected:a,valueFormatter:O.bath,id:2}),c.a.createElement(M,{placeholder:"Sq.Ft.",min:300,max:12e3,stepSize:300,g_onSelected:r,valueFormatter:O.sqft,id:3}),c.a.createElement("span",{style:{color:"white","font-size":"1.2em"}},"Garage: "),c.a.createElement("div",{className:"garageSelector"},c.a.createElement("input",{type:"checkbox",id:"hasGarage",name:"hasGarage",onClick:i}),c.a.createElement("label",{htmlFor:"hasGarage"})),c.a.createElement("p",{className:"resultsCount"},l?l.length:0," Results Found"))}function F(){var e=Object(u.e)(function(e){return e.listingBeingViewed}),t=Object(u.d)(function(e){return e.setListingBeingViewed});return c.a.createElement("div",{className:"detailsModul"},c.a.createElement("div",{className:"clickCapture",onClick:function(){t(null),console.log("hide modul")}}),c.a.createElement("div",{className:"detailsContent"},c.a.createElement("div",{className:"detailsGallery"},c.a.createElement("img",{src:e.thumb})),c.a.createElement("div",{className:"detailsInfo"},c.a.createElement("div",{className:"infoSpecs"},O.price(e.price)+"  |  "+O.bed(e.bdr)+"/"+O.bath(e.bth)+"  |  has garage: "+(e.garage?"Yes":"No")+" | "+O.sqft(e.sqf)),c.a.createElement("div",{className:"infoDescription"},"This is where listing details would go if this were a real listing.",c.a.createElement("br",null),"All stock images are from unsplash.com"))))}function B(){var e=Object(u.e)(function(e){return e.searchFilters}),t=Object(u.e)(function(e){return e.selectedCity}),n=Object(u.d)(function(e){return e.setFilteredResults}),r=Object(u.d)(function(e){return e.setFullResults}),i=Object(u.e)(function(e){return e.fullResults}),l=Object(u.e)(function(e){return e.listingBeingViewed}),o=function(e,t){return Math.max(Math.floor(Math.random()*t),e)},s=function(e){var t=o(300,1e4),n=o(8e4,999999),a=o(0,7),c=o(1,7),r=Math.random()>.5;return{addr:e.addr,imgs:e.imgs,thumb:e.thumb,sqf:t,price:n,bdr:a,bth:c,garage:r}};return Object(a.useEffect)(function(){if(i.length<=0)f.a.get("placeholderHouses.json").catch(function(e){return console.log(e)}).then(function(e){var t=e.data.houses.map(function(e){return s(e)});r(t),n(t)});else{var e=i.map(function(e){return s(e)});r(e),n(e)}},[t]),Object(a.useEffect)(function(){if(i.length>0){var t=i.filter(function(t){var n=!e.bHasGarage||e.bHasGarage&&t.garage;return t.sqf>=e.minSqft&&t.bdr>=e.minBdr&&t.bth>=e.minBath&&t.price>=e.minPrice&&t.price<=e.maxPrice&&n});n(t.map(function(e,t){return Object(v.a)({},e,{id:t})}))}},[e,i]),c.a.createElement("div",{className:"page"},l&&c.a.createElement(F,null),c.a.createElement(N,null),c.a.createElement("div",{className:"mapSearchResult"},c.a.createElement(S,null),c.a.createElement(C,null)))}var x={searchFilters:{minPrice:0,maxPrice:999999999,minBdr:0,minBath:0,minSqft:0,bHasGarage:!1},setMinPrice:Object(u.b)(function(e,t){e.searchFilters.minPrice=t}),setMaxPrice:Object(u.b)(function(e,t){e.searchFilters.maxPrice=t}),setMinBdr:Object(u.b)(function(e,t){e.searchFilters.minBdr=t}),setMinBath:Object(u.b)(function(e,t){e.searchFilters.minBath=t}),setMinSqft:Object(u.b)(function(e,t){e.searchFilters.minSqft=t}),togglebHasGarage:Object(u.b)(function(e,t){e.searchFilters.bHasGarage=t.target.checked}),selectedCity:{city:"",state:""},setSelectedCity:Object(u.b)(function(e,t){e.selectedCity=t}),resetSelectedCity:Object(u.b)(function(e){e.selectedCity={city:"",state:""}}),fullResults:[],setFullResults:Object(u.b)(function(e,t){e.fullResults=t}),filteredResults:[],setFilteredResults:Object(u.b)(function(e,t){e.filteredResults=t}),activeDropdown:null,setActiveDropdown:Object(u.b)(function(e,t){e.activeDropdown=t}),selectedHouseId:null,setSelectedHouseId:Object(u.b)(function(e,t){e.selectedHouseId=t}),listingBeingViewed:null,setListingBeingViewed:Object(u.b)(function(e,t){e.listingBeingViewed=e.fullResults[t]}),toMapSearch:!1,setToMapSearch:Object(u.b)(function(e,t){e.toMapSearch=t})},H=Object(u.c)(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(function(){return c.a.createElement(u.a,{store:H},c.a.createElement(l.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(p,null),c.a.createElement(o.d,null,c.a.createElement(o.b,{path:"/",exact:!0},c.a.createElement(g,null)),c.a.createElement(o.b,{path:"/mapSearch"},c.a.createElement(B,null))))))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.67cd5790.chunk.js.map